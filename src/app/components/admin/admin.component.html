<!-- src/app/components/admin/admin.component.html -->

<div *ngIf="isAdmin; else notAuthorized" class="container mt-5">
  <button (click)="logout()" class="logout-btn">Cerrar sesi贸n</button>

  <h2 class="text-center mb-4">Panel de Administraci贸n</h2>

  <!-- Formulario para crear un nuevo usuario -->
  <div class="card mb-4">
    <div class="card-header">
      <h3>Crear Usuario</h3>
    </div>
    <div class="card-body">
      <form (ngSubmit)="addUser()">
        <div class="form-group">
          <label for="email">Email:</label>
          <input type="email" [(ngModel)]="newUser.email" name="email" class="form-control" required />
        </div>
        <div class="form-group">
          <label for="password">Password:</label>
          <input type="password" [(ngModel)]="newUser.password" name="password" class="form-control" required />
        </div>
        <div class="form-group">
          <label for="role">Role:</label>
          <input type="text" [(ngModel)]="newUser.role" name="role" class="form-control" required />
        </div>
        <div class="form-group">
          <label for="name">Name:</label>
          <input type="text" [(ngModel)]="newUser.name" name="name" class="form-control" required />
        </div>
        <div class="d-flex justify-content-center mt-3">
          <button type="submit" class="btn btn-primary btn-lg">Crear Usuario</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Lista de Usuarios -->
  <div class="card mb-4">
    <div class="card-header">
      <h3>Usuarios</h3>
    </div>
    <div class="card-body">
      <ul class="list-group">
        <li *ngFor="let user of users" class="list-group-item d-flex justify-content-between align-items-center">
          {{ user.email }} ({{ user.role }})
          <button (click)="deleteUser(user.id)" class="btn btn-danger btn-sm">Eliminar</button>
        </li>
      </ul>
    </div>
  </div>

  <!-- Formulario para crear un nuevo producto -->
  <div class="card mb-4">
    <div class="card-header">
      <h3>Crear Producto</h3>
    </div>
    <div class="card-body">
      <form (ngSubmit)="addProduct()">
        <div class="form-group">
          <label for="name">Nombre:</label>
          <input type="text" [(ngModel)]="newProduct.name" name="name" class="form-control" required />
        </div>
        <div class="form-group">
          <label for="price">Precio:</label>
          <input type="number" [(ngModel)]="newProduct.price" name="price" class="form-control" required />
        </div>
        <div class="form-group">
          <label for="description">Descripci贸n:</label>
          <input type="text" [(ngModel)]="newProduct.description" name="description" class="form-control" required />
        </div>
        <div class="form-group">
          <label for="quantity">Cantidad:</label>
          <input type="number" [(ngModel)]="newProduct.quantity" name="quantity" class="form-control" required />
        </div>
        <div class="form-group">
          <label for="stock">Stock:</label>
          <input type="number" [(ngModel)]="newProduct.stock" name="stock" class="form-control" required />
        </div>
        <div class="d-flex justify-content-center mt-3">
          <button type="submit" class="btn btn-primary btn-lg">Crear Producto</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Lista de Productos -->
  <div class="card">
    <div class="card-header">
      <h3>Productos</h3>
    </div>
    <div class="card-body">
      <ul class="list-group">
        <li *ngFor="let product of products" class="list-group-item d-flex justify-content-between align-items-center">
          {{ product.name }} - ${{ product.price }}
          <button (click)="deleteProduct(product.id)" class="btn btn-danger btn-sm">Eliminar</button>
        </li>
      </ul>
    </div>
  </div>
</div>

<ng-template #notAuthorized>
  <div class="container mt-5">
    <div class="alert alert-danger text-center">
      <p>No tienes permiso para acceder a esta secci贸n.</p>
    </div>
  </div>
</ng-template>
